{% extends "base.html" %}
{% load tz %}
{% load static %}
{% load csp %}
{% load form_extras %}
{% block title %} {{ title }}{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% get_assessment request as assessment %}
            <span class="govuk-caption-l">{{ assessment.system.name }}</span>
            <h1 class="govuk-heading-l">
                Objective&nbsp;{{ objective_data.code }}&nbsp;-&nbsp;{{ title }}
            </h1>
            <p class="govuk-body">Please provide your answers for each principle. You can review the status of
                individual outcomes below each principle and change your answers if you need to.</p>
            {% include "partials/principal_summary-list.html" with objective_data=objective_data %}
            {% is_final_objective objective_data.code assessment as final_objective %}
            <form method="GET"
                    {% if not final_objective %}
                        {% next_objective objective_data.code assessment as next_objective_code %}
                        {% with assessment.framework|add:'_objective_'|add:next_objective_code as next_objective_url %}
                  action="{% url next_objective_url %}"
                        {% endwith %}
                    {% else %}
                  action="{% url 'edit-draft-assessment' assessment_id=assessment.id %}"
                    {% endif %}>
                <button type="submit" class="govuk-button" data-module="govuk-button" data-govuk-button-init="">
                    {% if not final_objective %}
                        Save and continue
                    {% else %}
                        Review assessment
                    {% endif %}
                </button>
            </form>
        </div>
    </div>
{% endblock %}
